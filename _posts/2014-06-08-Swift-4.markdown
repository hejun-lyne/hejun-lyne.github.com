---
layout: post
title: Swiftç¼–ç¨‹è¯­è¨€ï¼ˆ4ï¼‰
category: swift
url: Swift-4.html
summary: ã€ŠThe Swift Programming Languageã€‹çš„å­¦ä¹ ç¿»è¯‘ï¼Œå­—ç¬¦å’Œå­—ç¬¦ä¸²
---
####å­—ç¬¦ä¸²å’Œå­—ç¬¦ï¼ˆStrings and Charactersï¼‰
Stringå’Œ`NSString`æ˜¯ç›¸é€šçš„ï¼Œæ‰€æœ‰NSStringçš„APIéƒ½å¯ä»¥å¯¹Stringè°ƒç”¨ã€‚

**String Literals**<br />
å’ŒNSString Literalsä¸åŒï¼Œä¸éœ€è¦`@`ç¬¦å·ï¼Œåªéœ€è¦ä½¿ç”¨åŒå¼•å·å³å¯ã€‚
{% highlight js %}
let someString = "Some string literal value"
{% endhighlight %}
 String Literalå¯ä»¥åŒ…æ‹¬ä¸‹é¢è¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼š
 * è½¬ä¹‰çš„ç‰¹æ®Šå­—ç¬¦"\0ï¼ˆnullå­—ç¬¦ï¼‰"ï¼Œ"\\\ï¼ˆå·¦æ–œçº¿ï¼‰"ï¼Œ"\tï¼ˆtabï¼‰"ï¼Œ"\nï¼ˆæ¢è¡Œï¼‰"ï¼Œ"\rï¼ˆå›è½¦ï¼‰"ï¼Œ"\"ï¼ˆåŒå¼•å·ï¼‰"ï¼Œ"\'ï¼ˆå•å¼•å·ï¼‰"ã€‚
 * Single-byteçš„Unicodeé‡è¯ï¼Œå†™ä½œ`\xnn`ï¼Œè¿™é‡Œçš„`nn`ä»£è¡¨ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—
 * Two-byteçš„Unicodeé‡è¯ï¼Œå†™ä½œ`\Unnnn`ï¼Œè¿™é‡Œçš„`nnnn`ä»£è¡¨4ä¸ªåå…­è¿›åˆ¶æ•°å­—
 * Four-byteçš„Unicodeé‡è¯ï¼Œå†™ä½œ`\Unnnnnnnn`ï¼Œè¿™é‡Œçš„`nnnnnnnn`è¡¨ç¤º8ä¸ªåå…­è¿›åˆ¶çš„æ•°å­—

{% highlight js %}
let wiseWords = "\"Imagination is more important than knowledge\" - Einstein"
// "Imagination is more important than knowledge" - Einstein
let dollarSign = "\x24"        // $,  Unicode scalar U+0024
let blackHeart = "\u2665"      // â™¥,  Unicode scalar U+2665
let sparklingHeart = "\U0001F496"  // ğŸ’–, Unicode scalar U+1F496â€
{% endhighlight %}

**åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²**<br />
æœ‰ä¸¤ç§æ–¹å¼åˆå§‹åŒ–ï¼š
{% highlight js %}
var emptyString = "" // empty string literal
var anotherEmptyString = String() // initializer syntax
// these two strings are both empty, and are equivalent to each other

// check if empty
if emptyString.isEmpty {
    println("Nothing to see here")
}
// prints "Nothing to see here"
{% endhighlight %}

**å­—ç¬¦ä¸²çš„å¯å˜æ€§ï¼ˆMutabilityï¼‰**<br />
{% highlight js %}
var variableString = "Horse"
variableString += " and carriage"
// variableString is now "Horse and carriage"
 
let constantString = "Highlander"
constantString += " and another Highlander"
// this reports a compile-time error - a constant string cannot be modified
{% endhighlight %}

**å­—ç¬¦ä¸²å±äºå€¼ç±»å‹ï¼ˆValue Typesï¼‰**<br />
å­—ç¬¦ä¸²å‘å‡½æ•°æˆ–æ–¹æ³•çš„ä¼ å€¼é»˜è®¤éƒ½æ˜¯å¤åˆ¶ä¼ å€¼ï¼ˆè€Œ`NSString`é»˜è®¤æ˜¯å¼•ç”¨ä¼ å€¼ï¼‰ã€‚
Swiftçš„ç¼–è¯‘å™¨å¯¹stringçš„ä½¿ç”¨è¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ„å‘³ç€åªæœ‰åœ¨çœŸæ­£éœ€è¦çš„æ—¶å€™æ‰ä¼šå¯¹å­—ç¬¦ä¸²è¿›è¡Œå¤åˆ¶ã€‚

**å­—ç¬¦ï¼ˆCharactersçš„ä½¿ç”¨ï¼‰**<br />
æ¯ä¸€ä¸ªå­—ç¬¦å€¼ä»£è¡¨ä¸€ä¸ªUnicodeå­—ç¬¦ï¼Œå¯ä»¥ç”¨`for-in`éå†å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å­—ç¬¦
{% highlight js %}
for character in "Dog!ğŸ¶" {
    println(character)
}
// D
// o
// g
// !
// ğŸ¶â€
{% endhighlight %}
åˆ›å»ºä¸€ä¸ªå­—ç¬¦å¸¸é‡ï¼š
{% highlight js %}
let yenSign: Character = "Â¥"
{% endhighlight %}

**è®¡ç®—å­—ç¬¦**<br />
å¯ä»¥è°ƒç”¨globalå‡½æ•°`countElements`ï¼š
{% highlight js %}
let unusualMenagerie = "Koala ğŸ¨, Snail ğŸŒ, Penguin ğŸ§, Dromedary ğŸª"
println("unusualMenagerie has \(countElements(unusualMenagerie)) characters")
// prints "unusualMenagerie has 40 characters
{% endhighlight %}
>å› ä¸ºä¸åŒUnicodeå­—ç¬¦å’ŒåŒä¸€ä¸ªUnicodeå­—ç¬¦çš„ä¸åŒè¡¨è¾¾æ–¹å¼å ç”¨ä¸åŒçš„å†…å­˜ç©ºé—´ï¼Œæ‰€æœ‰Swift Stringä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦å¹¶ä¸æ˜¯å ç”¨ç›¸åŒçš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²çš„é•¿åº¦ä¸èƒ½é€šè¿‡è¿­ä»£è®¡ç®—å­—ç¬¦çš„ä¸ªæ•°æ¥å¾—åˆ°ï¼Œ`countElements`æ˜¯é€šè¿‡è¿­ä»£æ‰€æœ‰å­—ç¬¦æ¥è®¡ç®—ä¸ªæ•°çš„ï¼Œæ‰€ä»¥å¯¹äºé•¿å­—ç¬¦ä¸²å¯èƒ½æ•ˆç‡ä¸æ˜¯å¾ˆé«˜ã€‚è€Œä¸”`countElements`çš„åˆ°çš„ç»“æœå¹¶ä¸æ˜¯å§‹ç»ˆå’Œ`NSString`çš„`length`å±æ€§ä¸€è‡´çš„ï¼Œ`NSString`çš„lengthæ˜¯å­—ç¬¦ä¸²çš„UTF-16è¡¨è¾¾å¼çš„å­—ç¬¦ä¸ªæ•°ï¼Œæ‰€ä»¥å¦‚æœè¦åœ¨Swift `String`å¾—åˆ°ç›¸åŒçš„å€¼ï¼Œåº”è¯¥è°ƒç”¨å±æ€§`utf16count`ã€‚

**å­—ç¬¦ä¸²å’Œå­—ç¬¦çš„æ‹¼æ¥**<br />
ä½¿ç”¨`+`ã€`+=`æ¥å¾—åˆ°æ–°çš„å­—ç¬¦ä¸²ã€‚

**å­—ç¬¦ä¸²æ’å…¥ï¼ˆInterpolationï¼‰**<br />
å¦‚å‰é¢å·²ç»åœ¨ä½¿ç”¨çš„
{% highlight js %}
let multiplier = 3
let message = "\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)"
// message is "3 times 2.5 is 7.5
{% endhighlight %}

####å­—ç¬¦ä¸²æ¯”è¾ƒ
ä¸‰ç§æ¯”è¾ƒæ–¹å¼ï¼šå­—ç¬¦ä¸²ç›¸ç­‰ã€å‰ç¼€ç›¸ç­‰ã€åç¼€ç›¸ç­‰ã€‚

**å­—ç¬¦ä¸²ç›¸ç­‰**<br />
ä½¿ç”¨`==`ï¼š
{% highlight js %}
let quotation = "We're a lot alike, you and I."
let sameQuotation = "We're a lot alike, you and I."
if quotation == sameQuotation {
    println("These two strings are considered equal")
}
// prints "These two strings are considered equal
{% endhighlight %}

**å‰ç¼€å’Œåç¼€ç›¸ç­‰**<br />
ä½¿ç”¨æ–¹æ³•`hasPreffix`å’Œ`hasSuffix`ã€‚

**Uppercaseå’ŒLowercaseå­—ç¬¦ä¸²**<br />
è®¿é—®å­—ç¬¦ä¸²çš„å±æ€§`uppercaseString`å’Œ`lowercaseString`å³å¯

**Unicode**<br />
Swiftçš„`String`å’Œ`Character`éƒ½æ˜¯å®Œå…¨Unicode-compliantçš„ï¼Œæ”¯æŒå¾ˆå¤šä¸åŒçš„Unicodeç¼–ç ã€‚

**Unicodeæœ¯è¯­**<br />
æ¯ä¸€ä¸ªUnicodeå­—ç¬¦éƒ½å¯ä½¿ç”¨1ä¸ªæˆ–å¤šä¸ªunicode*é‡è¯ï¼ˆscalarï¼‰*æ¥è¡¨ç¤ºã€‚ä¸€ä¸ªUnicodeé‡è¯æ˜¯ä¸€ä¸ªå”¯ä¸€çš„21-bitçš„æ•°å€¼ï¼Œä¾‹å¦‚`U+0061`è¡¨ç¤º`LOWERCASE LATIN LETTER A("a")`ã€‚
å½“Unicodeå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶æˆ–å…¶ä»–å­˜å‚¨çš„æ—¶å€™ï¼Œè¿™äº›unicodeé‡è¯ä¼šè¢«ç¼–ç æˆä¸€æˆ–å¤šç§Unicode-definedæ ¼å¼ï¼Œæ¯ä¸€ç§æ ¼å¼å°†å­—ç¬¦ä¸²ç¼–ç æˆå¾ˆå¤šå°çš„åˆ†ç‰‡ï¼ˆchunksï¼‰ï¼ˆç§°ä¹‹ä¸º*ç¼–ç å•å…ƒcode units*ï¼‰ã€‚åŒ…æ‹¬UTF-8ã€UTF-16ç­‰ã€‚

**å­—ç¬¦ä¸²çš„Unicodeè¡¨è¾¾**<br />
Swiftä½¿ç”¨äº†ä¸åŒçš„å±æ€§æ¥è·å–å­—ç¬¦ä¸²çš„ä¸åŒUnicodeè¡¨è¾¾ï¼š
* UTF-8ï¼Œä½¿ç”¨`utf8`å±æ€§
* UTF-16ï¼Œä½¿ç”¨`utf16`å±æ€§
* 21-bit Unicode scalar valuesï¼Œä½¿ç”¨`unicodeScalars`å±æ€§

**UTF-8**<br />
{% highlight js %}
let dogString = "Dog!ğŸ¶"
for codeUnit in dogString.utf8 {
    print("\(codeUnit) ")
}
print("\n")
// 68 111 103 33 240 159 144 182
{% endhighlight %}

**UTF-16**<br />
{% highlight js %}
 for codeUnit in dogString.utf16 {
     print("\(codeUnit) ")
 }
 print("\n")
 // 68 111 103 33 55357 56374
{% endhighlight %}

**Unicode Scalars**<br />
{% highlight js %}
  for scalar in dogString.unicodeScalars {
      print("\(scalar.value) ")
  }
  print("\n")
  // 68 111 103 33 128054
  
  for scalar in dogString.unicodeScalars {
      print("\(scalar) ")
  }
  // D o g ! ğŸ¶
{% endhighlight %}